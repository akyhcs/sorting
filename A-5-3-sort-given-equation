//https://www.geeksforgeeks.org/problems/sort-the-given-array-after-applying-the-given-equation0304/0

import java.util.Arrays;

public class Solution {
    public static int[] sortArray(int[] arr, int A, int B, int C) {
        int n = arr.length;
        int[] transformed = new int[n];
        
        // Apply the equation
        for (int i = 0; i < n; i++) {
            transformed[i] = A * arr[i] * arr[i] + B * arr[i] + C;
        }

        // Use two-pointer approach to sort based on the parabola direction
        int[] result = new int[n];
        int left = 0, right = n - 1;
        int index = (A > 0) ? n - 1 : 0;

        while (left <= right) {
            int leftVal = transformed[left];
            int rightVal = transformed[right];

            if (A > 0) { // Upward parabola
                if (leftVal > rightVal) {
                    result[index--] = leftVal;
                    left++;
                } else {
                    result[index--] = rightVal;
                    right--;
                }
            } else { // Downward parabola
                if (leftVal < rightVal) {
                    result[index++] = leftVal;
                    left++;
                } else {
                    result[index++] = rightVal;
                    right--;
                }
            }
        }

        return result;
    }

    public static void main(String[] args) {
        int[] arr = {-4, -2, 0, 1, 3};
        int A = 1, B = -3, C = 5;
        int[] sortedArray = sortArray(arr, A, B, C);

        System.out.println("Sorted transformed array: " + Arrays.toString(sortedArray));
    }
}
